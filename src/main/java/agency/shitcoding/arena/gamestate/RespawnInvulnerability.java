package agency.shitcoding.arena.gamestate;

import agency.shitcoding.arena.GameplayConstants;
import org.bukkit.entity.Player;
import org.bukkit.potion.PotionEffectType;

public class RespawnInvulnerability {

  public static final PotionEffectType EFFECT_TYPE = PotionEffectType.FIRE_RESISTANCE;

  public void registerRespawn(Player player) {
    var respawnEffect = EFFECT_TYPE
        .createEffect(GameplayConstants.RESPAWN_INVULNERABILITY_DURATION, 1);
    player.addPotionEffect(respawnEffect);
  }

  public void onShoot(Player player) {
    if (GameplayConstants.RESPAWN_INVULNERABILITY_DISABLE_ON_SHOOT) {
      player.removePotionEffect(EFFECT_TYPE);
    }
  }

  public boolean hasInvulnerability(Player player) {
    return player.hasPotionEffect(EFFECT_TYPE);
  }
}
